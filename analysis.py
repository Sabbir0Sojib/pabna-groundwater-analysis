import geopandas as gpdimport matplotlib.pyplot as pltimport numpy as npimport pandas as pdfrom scipy.interpolate import Rbfimport matplotlib.colors as mcolorsfrom shapely.geometry import boximport matplotlib.patheffects as pegdf = gpd.read_file('Pabna.shp')df = pd.read_csv('Pabna_GW_Data.csv')pabna_boundary = gdf.to_crs("EPSG:4326")pabna_outline = pabna_boundary.dissolve()bounds = pabna_outline.total_boundsresolution = 500padding = 0.1xi = np.linspace(bounds[0]-padding, bounds[2]+padding, resolution)yi = np.linspace(bounds[1]-padding, bounds[3]+padding, resolution)Xi, Yi = np.meshgrid(xi, yi)rbf = Rbf(df['Longitude'], df['Latitude'], df['Depth'], function='linear')zi = rbf(Xi, Yi)fig, ax = plt.subplots(figsize=(14, 10), dpi=300)ax.set_facecolor("#f0f0f0")levels = np.linspace(np.nanmin(zi), np.nanmax(zi), 30)cf = ax.contourf(Xi, Yi, zi, levels=levels, cmap='RdYlBu', alpha=1.0, zorder=2)cl = ax.contour(Xi, Yi, zi, levels=levels[::3], colors='white', linewidths=0.4, alpha=0.5, zorder=2)ax.clabel(cl, inline=True, fontsize=7, fmt='%.1f', colors='white')mask_poly = gpd.GeoDataFrame({'geometry': [box(bounds[0]-1, bounds[1]-1, bounds[2]+1, bounds[3]+1)]}, crs="EPSG:4326")mask_poly = mask_poly.overlay(pabna_outline, how='difference')mask_poly.plot(ax=ax, color='#f0f0f0', zorder=3)pabna_boundary.plot(ax=ax, facecolor='none', edgecolor='black', linewidth=0.3, zorder=4, linestyle=':')pabna_outline.plot(ax=ax, facecolor='none', edgecolor='#333333', linewidth=1.5, zorder=5)ax.scatter(df['Longitude'], df['Latitude'], c='white', s=30, edgecolors='black', linewidth=0.5, zorder=6)for idx, row in pabna_boundary.iterrows():name_col = next((c for c in ['ADM3_EN', 'Upazila', 'Name'] if c in row), None)if name_col and row.geometry.area > 0.001:centroid = row.geometry.centroidtxt = ax.text(centroid.x, centroid.y, str(row[name_col]), fontsize=9, ha='center', va='center', weight='bold', zorder=7)txt.set_path_effects([pe.withStroke(linewidth=2, foreground='white')])ax.yaxis.tick_right()ax.yaxis.set_label_position("right")cbar = plt.colorbar(cf, ax=ax, location='left', pad=0.08, fraction=0.03, shrink=0.7)cbar.set_label('Water Depth (m)', fontsize=11, weight='bold')ax.set_xlabel("Longitude", fontsize=12, weight='bold', labelpad=10)ax.set_ylabel("Latitude", fontsize=12, weight='bold', labelpad=15)ax.set_title("Groundwater Depth Analysis\nPabna District", fontsize=18, fontweight='bold', pad=20)ax.set_xlim(bounds[0]-0.02, bounds[2]+0.02)ax.set_ylim(bounds[1]-0.02, bounds[3]+0.02)plt.savefig("Pabna_Fixed_Layout.png", dpi=300, bbox_inches='tight')print("Map saved successfully!")